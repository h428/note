# 1 概述

为了更好地推进实验室服务器的规范化管理，对实验室已有工作进行沉淀和归档，实验室现推出统一的服务器管理标准，我们暂且将其称为《DMCI 服务器管理标准》（后文统称标准）。标准会在后续的使用中不断修订，主要涵盖下述几个方面：

- 数据存储标准（所有人须知）
- 用户分配标准（管理员须知）
- 数据备份标准（管理员须知）

不符合本标准组织的数据将不再得到保障，可能会被服务器管理员定期删除。

> 标准来源：在解决服务器 102 磁盘不足的问题过程中，我们发现了实验室服务器数据管理极其混乱，同时老师希望更好地进行实验室工作的沉淀，故我们制定了本标准，先从服务器 102 开始试行，后续会逐步推广到其他服务器。

# 2 数据存储标准（所有人须知）

> 注：此节讨论的数据存储，是针对实验室活动用户进行的，因此标准相对较为宽松。如果是已毕业且不再使用服务器的用户，需要及时移除活动用户，并将需要沉淀的工作严格按照 `数据备份标准（管理员须知）` 进行备份。

- 对于三个月内有编辑的数据，不做处理
- 不再使用的数据集和模型结果文件要及时删除
- 超过三个月未编辑，文件夹超过 5G 且需要长期保存的数据，需要编写 README.md，否则可能遭到清理（这类文件夹存放的一般是临时数据集、模型中间结果和模型结果，有的同学训练完网络，数据集、中间结果都不删除继续占用着硬盘，久而久之就忘了删除了，因此对于需要长期保留的大文件需要编写 README.md，确认保存）
- 可以使用 `du -h --max-depth=1` 查看当前目录的占用情况

# 3 用户分配标准（管理员须知）

- 所有人在一台机器只允许分配一个长期使用账号，若需要创建多个个人账号，需要在多出的用户目录下添加 README.md 文件注明原因（由分配用户的管理员告知使用者自己添加），并在用期结束后及时删除，需要沉淀的工作按 `数据备份标准` 进行备份。
- 所有实验室用户根据语义化进行分类，在对应分类下创建用户目录，然后在 `/home/xxx` 对应的文件夹下创建对应的软链接并链接至用户目录。
- 对于同一个用户在不同机器上分类文件夹的选取要保持一致性。
- 对于学生用户，按入学年份进行分类，统一创建名称为 `s+入学年份` 的`学生分类文件夹`，例如对于 2022 级学生，管理员选取某一块有较大空闲的硬盘（目录一般是 `/data?`），在该硬盘下创建 `s2022` 文件夹，该年入学的同学统一在该文件夹下新建用户目录，注意做好记录
  - 对于硕博无缝衔接的同学，按硕士入学年份选择`学生分类文件夹`，这样留实验室读博无须更换工作目录
  - 学生毕业后及时移除工作目录，需要沉淀的工作按 `数据备份标准` 进行备份。
  - `学生分类文件夹`理论上不创建多个，当同一级的学生所用数据超过一块硬盘容量时优先清理无效工作数据，只有确定有效工作数据确实大于一块硬盘容量，则可以考虑在另一块硬盘下创建同名的`学生分类文件夹`，并迁移部分学生用户数据到新文件夹，此时需要为这两个拆开的 `学生分类文件夹` 添加 README.md 文件，注明拆开原因。
- 对于项目用户（专门为实验室某一项目工作开设的用户），统一存储在 `/projects` 文件夹下，例如对于 dna 存储项目，创建的用户目录为 `/projects/dna`
  - 对于项目用户，必须在用户目录添加 README.md 文件，著名该项目的信息介绍以及使用时间
  - 对于只提供短期服务的项目，时间到期后要及时删除
  - 对于需要长期提供服务的项目，需要在 README.md 注明长期原因。
  - 允许在不同的硬盘都创建 `/projects` 文件夹，分别存放不同的项目。
- 对于老师的账户，统一存储在 `/teachers` 文件夹下

// todo 讨论有什么遗漏的，以及迁移工作的进行

> 注意：用户数据迁移工作需要逐步进行，在该用户没有跑实验时进行。

# 4 数据备份标准（管理员须知）

数据备份工作主要是对已毕业学生的工作内容备份，由于该部分关系到实验室已有工作的沉淀，因此该部分标准要求较为严苛，同时要求留下的 README.md 信息要尽量完整。

- 备份数据统一存放于某块硬盘 `/data?` 下的 `/backup` 目录下，在该目录下继续分类组织。
- 对于学生用户的数据备份，和用户分配采取统一标准，采用 `s+入学年份` 作为 `学生分类文件夹`，例如 `/data1/backup/s2022`
- 对于某个用户的文件夹，必须给出 README.md 文件，描述用户文件夹归属
- 用户目录下的每个文件夹，都要提供 README.md 文件，描述该文件夹下的数据（一般是按项目归档，或者是某个方向的工作）
- 对于公共大数据集统一备份，并在有使用到项目的 README.md 中注明

# 5 README.md 书写标准

根据标准，目前需要 README.md 的数据类型文件夹总共有下述几类：

- 数据集文件夹：该文件夹存在大量数据集，需要编写 README.md 说明情况
- 项目用户文件夹：该用户目录为专门用于某一项目的目录，必须编写 README.md 说明情况
- 个人用户文件夹：该用户目录是给某个用户多开的临时用户，必须编写 README.md 说明情况
- 备份数据文件夹：该目录为某个同学的备份目录，必须编写完整的 README.md

```js
基本描述（必填）：描述数据集或项目基本作用
负责人（必填）：数据或项目的负责人，允许多个
有效时间（必填）：例如 `2022.11.22 - 2022.12.31`
长期保存原因（有效时间为长期则必填）：如果是长期，则必须描述长期原因
拆分原因：对于被拆分的学生分类文件夹，需要描述拆分原因

对于备份数据，需要逐文件夹提供 README.md 文件
```
