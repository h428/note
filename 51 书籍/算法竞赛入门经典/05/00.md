
# 5. C++ 与 STL 入门

## 5.1 从 C 到 C++

- 简单介绍 C++ 以及算法竞赛常用的部分
- 在 C++ 中， .h 的头文件换成了以 c 开头的对应文件，如 stdio.h 和 cstdio，不推荐使用 .h 文件
- C++ 提供了一系列流操作，但效率较低，竞赛一般较少使用，偶尔涉及到 string 类型才使用
- C++ 有命名空间的概念，内置模板函数大多在 std 命名空间内部，一般需要导入该命名空间为默认空间，但比赛时很少使用自己的命名空间
- C++ 还含有引用的概念，引用即为别名，虽然其功能不如指针，但引用可以减少出错的可能
- C++ 提供了一个字符串类 string，支持流式读写和很多方便的函数和运算，但效率有些慢，例如下述样例
```C++
#include <iostream>
#include <string>
#include <sstream>
using namespace std;


/**
 * 求每行的整数和
 * 1 2 3 4 5 -> 15
 * 6 7 8 9 10 -> 40
 * @return 0
 */
int main()
{
    string line;

    while (getline(cin, line)) {
        int sum = 0, x;
        // 将输入的行 string 格式化为字符串流
        stringstream ss(line);
        // 从字符串流取出每个整数，然后求个
        while (ss >> x) {
            sum += x;
        }
        cout << sum << endl;
    }
}
```
- string 和 sstream 都很方便但是 string 很慢，sstream 更慢，应该金针使用
- C++ 的结构体和类主要的区别是默认的访问权限方式不同，其他差异很小，竞赛中更常用结构体，因为不考虑到封装性
- 结构体也支持成员变量、成员函数、构造函数、重载等概念
- 结构体内部有一个 this 指针，其指向当前实例，在成员函数内部可以使用 this 指针
- 结构体可以拥有一个或多个构造函数，用于创建对象时调用
- C++ 还提供了模板的概念，使用模板函数和模板类可以抽象类型，复用代码

## 5.2 STL 初步

### 5.2.1 排序与检索

- 排序主要使用 algorithm 库下的 sort 函数实现，其是一个模板函数，比较默认采用 `<`，因此被比较的类型需要重载该运算符
- sort 函数前两个参数传入的是数组的首位地址，左闭右开区间，只有两个函数默认使用小于号比较，如 `sort(arr, arr+n);`
- 或者你也可以在比较时传入一个 cmp 函数，用于函数的比较，如下列从大到小的 cmp 函数
```C++
/**
 * 从大到小排序
 * @param a 第一个数，最好设置为常引用
 * @param b 第二个数，最好设置为常引用
 * @return 返回比较结果
 */
bool cmp(const int& a, const int& b) {
    return a > b;
}
```
- 然后调用时传入 cmp 函数即可，`sort(arr, arr+n, cmp);`
- lower_bound 是二分查找，其作用是查找大于或者等于 key 的第一个元素位置，而 upper_bound 则查找大于 key 的第一个元素的位置


### 5.2.2 不定长数组 vector


### 5.2.3 集合 set

### 5.2.4 映射 map

### 5.2.5 栈、队列与优先队列

## 5.3 大整数类
