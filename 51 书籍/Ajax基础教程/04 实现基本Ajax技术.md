
## 实现基本Ajax技术

------


### 4.1 完成验证

- 以往，完全靠JavaScript编写表单数据检查是办不到的，必须在服务器以某种方式重写，因为用户可能禁用JavaScript

### 4.2 读取响应首部

- 有时只想ping一下服务器，或者读取Content-Type、Content-Length等
- 如果只想获取响应首部，标准的做法是使用HEAD请求
- 响应状态码200表示成功，500表示处理请求时出现内部错误

### 4.3 动态加载列表框

- Web应用通常使用“向导工具”设计原则来构建，即每个屏幕要求用户输入少量的信息，每个后续页面的数据都依据前一页的输入来创建
- 在Ajax技术出现之前，动态地更新页面而不刷新整个页面是很难办到的，甚至根本不可能
- 避免完全页面刷新的一种技术是在页面上隐藏数据，并在需要的时候再显示它们
- 但是它们只在有限的情况（数据量相对较少）下使用，即页面中仅限于根据用户的输入对有限的选择进行修改，而且这样的选择必须相对较少
- 但使用Ajax，则可以提供选择输入，然后由服务器进行操作，最后返回对应结果

### 4.4 创建自动刷新页面

- 使用Ajax，用户就可以不必反复点击刷新按钮，而实现网页内容的自动刷新
- 例程采用单击按钮后开始执行，实际中一般以onload事件代替
- setTimeout方法，允许以固定的时间间隔（单位为毫秒）执行给定的方法
- createRow()方法使用DOM动态创建内容；refreshTime()用于刷新定时器的值

### 4.5 显示进度条

- 几乎每一个应用都会时不时地调用一个长时间运行的事务，如果关心系统的可用性，就要确保用户能很容易地看到系统的状态
- 使用Ajax，为Web页面建立进度条不再非常困难
- pollCallback()调用setTimeout()，从而每两秒调用一次服务器
- processResult()方法中，从服务器查找已完成比例的第一位数字，从而得出要讲进度条中的那些进度块着色