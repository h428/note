



# 3. 删除


- 对于被删除节点：
- 左右孩子都不是 NIL，则找到后继节点替换删除节点，然后递归删除替换节点，只会递归一次
- 一个孩子是 NIL，另一个孩子不是 NIL
    - 若被删除节点是红色，则用非 NIL 孩子替换即可，不影响性质 5
    - 则另一个孩子由于不是 NIL 必定是红色（若是黑色则违背性质 5），用红色孩子替换删除节点，并改为黑色
- 两个孩子都是 NIL（相当于两个孩子都是黑色，由于不可能一个孩子是 NIL 另一个是黑色节点，这样违背性质 5，因此此时必定两个都是 NIL）
    - 用 NIL 替换被删除节点，替换后的节点记作 N，其 parent 记为 P，sibling 记为 S，S_L、S_R 为 S 的左右孩子
    - 情况 1：N 是根，则删除根节点即可
    - 情况 2：S 为红色，P 必定为黑色，我们通过染红 P 染黑 S 然后对 P 做一次左旋转化为 S 为黑色的情况，即后面的 3 5 6
    - 情况 3：S 及其孩子都为黑色，P 也为黑色，把 S 染红，则 P 的黑高度已经正确，但 P 往上的节点的黑高度会少 1，因为我们染红了 S，因此要继续向上递归处理 P
    - 情况 4：S 及其孩子都为黑色，P 为红色，把 S 染红，P 染黑即可
    - 情况 5：S 为黑色，S_L 为红色，把 S 染红 S_L 染黑然后对 S 做右旋，转化为情况 6，即 S_R 为红色
    - 情况 6：S 为黑色，S_R 为红色，把 S_R 染黑，然后对 P 左旋即可